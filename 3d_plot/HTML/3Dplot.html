<!DOCTYPE html>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
	   <script type="text/javascript" src="./qwebchannel.js"></script>
   </head>
   <body style="height: 100%; margin: 0">
   
   <button onclick="updateImg('[[-1,-1,0],[-0.5,-1,0],[0,-1,0],[0.5,-1,0],[1,-1,0],[-1,-0.5,0],[-0.5,-0.5,0],[0,-0.5,0],[0.5,-0.5,0],[1,-0.5,0],[-1,0,0],[-0.5,0,0],[0,0,0],[0.5,0,0],[1,0,0],[-1,0.5,0],[-0.5,0.5,0],[0,0.5,0],[0.5,0.5,0],[1,0.5,0],[-1,1,0],[-0.5,1,0],[0,1,0],[0.5,1,0],[1,1,0]]')">update</button>
   
   
		
       <div id="container" style="height: 100%"></div>
	   <script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=BjclgGCFt7Ms7G7GBqhlOlmAbNcf1eUF"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
	   <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
       <script type="text/javascript">
var dom ;
var myChart;
var app = {};
option = null;

 function init()
 {
	if(typeof qt != 'undefined')
	{
		new QWebChannel(qt.webChannelTransport,function(channel)
		{
		context = channel.objects.context;
		}
		);
	}
	else
	{
		alert("qt 对象获取失败");
	}
  
 }
 



function writeObj(obj){ 
 var description = ""; 
 for(var i in obj){ 
 var property=obj[i]; 
 description+=property; 
 } 
 alert(description); 
}



option = {
    tooltip: {},
    backgroundColor: '#fff',

	visualMap: {
        show: false,
        dimension: 2,
        min: -1,
        max: 1,
        inRange: {
            color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
        }
    },

    xAxis3D: {
        type: 'value',
		name: 'smy'
    },
    yAxis3D: {
        type: 'value'
    },
    zAxis3D: {
        type: 'value',
		
    },
    grid3D: {
        viewControl: {
            // projection: 'orthographic',
			autoRotate: true
        }
		
    },


    series: [{
        type: 'surface',
        wireframe: {
             //show: false
        }	
		/*data:[
    [-1,-1,0],[-0.5,-1,0],[0,-1,0],[0.5,-1,0],[1,-1,0],
    [-1,-0.5,0],[-0.5,-0.5,1],[0,-0.5,0],[0.5,-0.5,-1],[1,-0.5,0],
    [-1,0,0],[-0.5,0,0],[0,0,0],[0.5,0,0],[1,0,0],
    [-1,0.5,0],[-0.5,0.5,-1],[0,0.5,0],[0.5,0.5,1],[1,0.5,0],
    [-1,1,0],[-0.5,1,0],[0,1,0],[0.5,1,0],[1,1,0]
	]
	*/
    }]

};
/*if (option && typeof option === "object") {

	//writeObj(d);
	
	//option.series.data=d;
	
    //myChart.setOption(option, true);
}*/




function updateImg(data){
/*
	option.series[0].data = [
    [-1,-1,0],[-0.5,-1,0],[0,-1,0],[0.5,-1,0],[1,-1,0],
    [-1,-0.5,0],[-0.5,-0.5,1],[0,-0.5,0],[0.5,-0.5,-1],[1,-0.5,0],
    [-1,0,0],[-0.5,0,0],[0,0,0],[0.5,0,0],[1,0,0],
    [-1,0.5,0],[-0.5,0.5,-1],[0,0.5,0],[0.5,0.5,1],[1,0.5,0],
    [-1,1,0],[-0.5,1,0],[0,1,0],[0.5,1,0],[1,1,0]
	];

*/
	var da = JSON.parse(data);
	
	option.series[0].data = da;

	//console.log(da);
	
	console.log(option.series[0].data);

	dom = document.getElementById("container");
	
	myChart = echarts.init(dom);	 
	myChart.setOption(option, true);
}


 function testsmy(x){
	writeObj(x);
}



  //构造函数
  window.onload=function (){
	
	init();
    
  }

</script>
	   

	   
   </body>
</html>